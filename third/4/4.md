Task 4 - Building a Robust Library System [10 marks]
Thanks to your work so far, the library now has a functioning system. However, librarians have reported that some records in the CSV files are corrupted with invalid values. This has caused misbehaviour in the system, sometimes even crashing during busy exam periods, creating unnecessary stress for students.

In real-world software engineering, robustness and correctness are just as important as functionality. Programs must gracefully handle unexpected situations and invalid inputs without failing. Two key approaches developers use are:

Assertions: Internal checks that validate assumptions made by the programmer (e.g., "This variable should never be negative"). Assertions are mainly used during development and debugging.

Defensive programming: Validates inputs and usage patterns to prevent invalid or unexpected behaviour at runtime. This includes checking for correct types, value ranges, and providing helpful error messages when something goes wrong.

Description
In this task, you will extend your library system by adding custom error handling to make it more robust. Python already raises built-in errors, but here you must define and use custom exceptions (in custom_errors.py) to handle library-specific error conditions.

Building upon Task 3, update your user.py and book.py modules to handle invalid input, and modify task4.py to handle exceptions gracefully so that the system does not crash.

You must ensure that this system is:

Correct: Through use of assert to validate assumptions in your logic.

Safe: Through defensive programming techniques that prevent invalid inputs (e.g. wrong types, negative amounts).

In this task we will be using custom errors as python will already raise some of these errors when we execute invalid code. Our new errors are located in cusom_errors.py. You must use these custom errors, please see rubric for related penalties in this task.

After auditing the CSV data, the librarian has introduced new validation rules to be applied in addition to the requirements described in Tasks 1–3. These rules strengthen data quality and prevent corrupted records from entering the system.

Users

Every user must have a password. Passwords cannot be empty.

Every word in a user's name must contain only alphabetic characters. Numbers, symbols, and special characters are not allowed.

Department is mandatory for students and staff, but must remain empty for other users. The only valid departments are: IT, Business, Arts, Science, Engineering, Education, Medicine and Library.

Books

The library only recognizes two valid book types: physical and online.

The following fields are required for all books: Title, Author, Year

Each book may have at most 5 keywords. 

Keywords must consist of letters and numbers only. The only allowed special character is the hyphen (-).

Loans

Every loan record must be associated with an existing user and an existing book.

The due date is a required field and cannot be left empty.

Defensive Programming
The following exceptions are provided to you in custom_errors.py:

CustomTypeError:

A value is the wrong type (e.g. a string instead of a float or int).

CustomValueError:

A value is of the correct type but invalid (e.g. negative copies).

CustomDateError:

Raised when a date is in the wrong format or when the date logic is invalid (e.g., borrow date occurs in the future).

MissingRequiredFieldError:

Raised when a required field is missing.

UserNotFoundError or BookNotFoundError:

Raised when a loan references a user or book that does not exist.

CustomOperationError :

Raised when an invalid borrow or return action is attempted.

CustomLimitError:

Raised when a user exceeds their quota or borrowing limit.

CustomKeyError:

Occurs when you try to access a key in the dictionary that doesn't exist. 这个是task 4